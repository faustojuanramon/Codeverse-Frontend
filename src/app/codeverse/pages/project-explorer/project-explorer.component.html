<app-navbar [isExplorer]="isExplorer"></app-navbar>

<div class="container-fluid">

	<div class="row h-100">

		<div class="col-sm-12 col-md-4 col-lg-2 p-4 bg-custom2">

			<div class="options">

				<button class="btn customBtn" [disabled]="isUpDisabled === true || isLoading === true">
					<fa-icon [icon]="faArrowUp"></fa-icon>Ir Arriba
				</button>
				<button class="btn customBtn" [disabled]="isLoading === true" (click)="openModal('folder')">
					<fa-icon [icon]="faFolderPlus"></fa-icon>Nueva Carpeta
				</button>
				<button class="btn customBtn" [disabled]="isLoading === true" (click)="openModal('project')">
					<fa-icon [icon]="faFileCode"></fa-icon>Nuevo Proyecto
				</button>
				<button class="btn customBtn" [disabled]="isLoading === true" (click)="openModal('snippet')">
					<fa-icon [icon]="faBarsStaggered"></fa-icon>Nuevo Snippet
				</button>
				<button [ngClass]="{'btn customBtn': true, 'marked':onlyFolders}" (click)="onlyFolders = !onlyFolders"
					[disabled]="isLoading === true">
					<fa-icon [icon]="faFolderTree"></fa-icon>Solo Carpetas
				</button>
				<button [ngClass]="{'btn customBtn': true, 'marked':onlyProjects}"
					(click)="onlyProjects = !onlyProjects" [disabled]="isLoading === true">
					<fa-icon [icon]="faCode"></fa-icon>Solo Proyectos
				</button>
				<button [ngClass]="{'btn customBtn': true, 'marked':onlySnippets}"
					(click)="onlySnippets = !onlySnippets" [disabled]="isLoading === true">
					<fa-icon [icon]="faBarsStaggered"></fa-icon>Solo Snippets
				</button>
				<button [ngClass]="{'btn customBtn': true, 'marked':onlySharedProject}"
					(click)="onlySharedProject = !onlySharedProject" [disabled]="isLoading === true">
					<fa-icon [icon]="faShareNodes"></fa-icon>Proyectos Compartidos
				</button>
			</div>

		</div>

		<div class="col-sm-12 col-md-8 col-lg-10 p-4 bg-custom1">

			<div class="header" role="search">

				<h1>{{ rootFolder.name }}</h1>

				<div class="search">
					<input class="btn customBtn" type="search" placeholder="Search" aria-label="Search">
					<button class="btn customBtn">Buscar</button>
				</div>

			</div>
			<hr>

			<div class="d-flex justify-content-center" *ngIf="isLoading === true">
				<div class="spinner-border" style="width: 3rem; height: 3rem;" role="status">
					<span class="visually-hidden">Cargando...</span>
				</div>
			</div>

			<div class="table-responsive" *ngIf="isLoading === false">
				<table class="table table-light table-hover table-stripped align-middle">
					<thead>
						<tr>
							<th>Nombre</th>
							<th>Tipo</th>
							<th>Creado</th>
							<th>Modificado</th>
							<th class="text-center">Acciones</th>
						</tr>
					</thead>
					<tbody class="table-group-divider">

						<tr *ngFor="let folder of rootFolder.folders">

							<td routerLink="/">{{ folder.name }}</td>
							<td>Carpeta</td>
							<td>{{ folder.createdAt }}</td>
							<td>{{ folder.modifiedAt ? folder.modifiedAt : 'ND' }}</td>
							<td class="text-center">

								<button class="btn customDeleteBtn" *ngIf="triggerDeleteAction === false"
									(click)="changeTriggerDeleteActionValue()">Borrar</button>

								<div class="deleteActions" *ngIf="triggerDeleteAction === true">
									<button class="btn btn-success" (click)="deleteFolder(folder._id!)"><fa-icon [icon]="
										faCheck"></fa-icon></button>
									<button class="btn btn-danger" (click)="changeTriggerDeleteActionValue()"><fa-icon
											[icon]="faXmark"></fa-icon></button>
								</div>

							</td>

						</tr>

						<tr *ngFor="let project of rootFolder.projects">

							<td routerLink="/">{{ project.name }}</td>
							<td>Proyecto</td>
							<td>{{ project.createdAt }}</td>
							<td>{{ project.modifiedAt ? project.modifiedAt : 'ND' }}</td>
							<td class="text-center">

								<button class="btn customDeleteBtn" *ngIf="triggerDeleteAction === false"
									(click)="changeTriggerDeleteActionValue()">Borrar</button>

								<div class="deleteActions" *ngIf="triggerDeleteAction === true">
									<button class="btn btn-success" (click)="deleteProject(project._id!)"><fa-icon
											[icon]="faCheck"></fa-icon></button>
									<button class="btn btn-danger" (click)="changeTriggerDeleteActionValue()"><fa-icon
											[icon]="faXmark"></fa-icon></button>
								</div>

							</td>

						</tr>

					</tbody>
				</table>
			</div>
		</div>

	</div>
</div>
